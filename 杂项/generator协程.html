<!DOCTYPE html>
<html>

<head>
    <title>generator协程</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> 
</head>
 

<body> 
    <div id='myDiv'>
        
    </div>
</body>

</html>

 
<script type="text/javascript">
    
    // function* asyncJob() {
    //   console.log('我开始执行了')
    //   // ...其他代码
    //   var f = yield fn();
    //   console.log(f)
    //   // ...其他代码
    // }

    // var asyncJob = asyncJob()

    // console.log(asyncJob.next())
    // console.log(asyncJob.next())
    // console.log(asyncJob.next())

    // function fn () {
    //     return new Promise((resolve, reject)=> {
    //         setTimeout(()=>{
    //             resolve(1)
    //         },1000) 
    //     })
    // }

    // function* gen(x){
    //   try {
    //     var y = yield x + 2;
    //   } catch (e){
    //     console.log(e);
    //   }
    //   return y;
    // }

    // var g = gen(1);
    // console.log(g.next());
    // g.throw('出错了');
    // console.log(g.next(10))


    var fetch = function(){
        return new Promise ((resolve, reject)=>{
            setTimeout(()=>{
                resolve('我是异步加载好的数据...')
            },3000)
        })
    };



    function* gen(){ 
      var result = yield fetch();
      console.log(result);
    }

    var g = gen();
    var result = g.next(); 
    result.value.then(function(data){
        console.log(data,'我是then里面的%%%')
         g.next(data);
    });

</script>